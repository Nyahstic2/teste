<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <title>Olá, mundo</title>
    <style>
      span{
        display: block;
      }
       .particle {
            position: absolute;
            font-size: 24px;
            animation: fly 4s ease-in-out forwards;
        }
      .error{
        color: red;
      }
        @keyframes fly {
            0% {
                font-size: 24px;
                opacity: 1;
            }
            100% {
                font-size: 0px;
                opacity: 0;
            }
        }
    </style>
  </head>
  <body>
      <div id="buttonDiv"> <button id="botao" onclick="addNumero()">Clique-me</button> </div>
      <span id="clique" style="display: block;"></span>
    <script defer>
      let num = 0;    
      let erro = false;
      const botao = document.querySelector('#botao');
      const buttonDiv = document.querySelector('#buttonDiv');
      function addNumero(){
        
          num+=Math.floor(Math.random() * 10);
          createParticle();
          document.getElementById("clique").innerHTML = `Você clicou ${num} ${num == 1 ? "vez" : "vezes"}`;
          if ((num % 1000) == 0) { 
          
        var tempoRestante = 3; // Tempo de espera em segundos
            erro = true;
        const intervalo = setInterval(() => {
            tempoRestante--;
            if (tempoRestante == 0) {
                clearInterval(intervalo); // Parar o contador
              erro = false;
            }
        }, 1000); // Atualização a cada segundo
          
          }
      }

      
        function createParticle() {
            const particle = document.createElement('div');
            particle.classList.add('particle');
            if(erro)particle.classList.add('error');
            if(!erro)particle.textContent = Math.floor(Math.random() * 10);
            else particle.textContent = '0';
            document.body.appendChild(particle);

            let x = Math.random() * window.innerWidth - 30;
            let y = Math.random() * window.innerHeight - 30;
            particle.style.left = `${x}px`;
            particle.style.top = `${y}px`;
            const xSpeed = Math.random() * Math.floor(Math.random() * 4);
            const ySpeed = (Math.random() * Math.floor(Math.random() * 2)) + 1;
            console.table({
              name: "particula criada",
              vel: {
                x: xSpeed,
                y: ySpeed
              },
              pos: {
                x: x,
                y: y,
              }
            });
            let num = setInterval(() => {
                x-= xSpeed;
                y-= ySpeed;
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;
            }, 1);
            setTimeout(() => {
                particle.remove();
                clearInterval(num);
            }, 4000); // Remove a partícula após 2 segundos
        }
    
    </script>
  </body>
</html>
